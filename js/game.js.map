{"version":3,"sources":["game.js"],"names":["Game","player","total_squiggle","total_bubbles","total_square","total_triangle","score","total_objects","body_content","document","querySelectorAll","gameobjects","initBackground","initGame","forEach","row","i","setTimeout","firstElementChild","classList","add","start_timer","startGame","bind","length","ready","body","addEventListener","kc","e","keyCode","which","stopGame","finishGame","sortShapes","renderScore","count","move_distance","game_timer","setInterval","map","y","x","render","winScreen","background","tabIndex","focus","Player","clearTimeout","clearInterval","o","destroy","win_screen","createElement","innerHTML","btn","querySelector","appendChild","remove","removeEventListener","_preventScroll","parentNode","removeChild","distance","x1","y1","x2","y2","Math","sqrt","random","filter","shape","el","style","transform","round","min","floor","push","Enemy","insertBefore","childNodes","col_count","last_shape","GameObject","element","transition","width","clientWidth","window","innerWidth","webkitTransform","game","moving","init","bullets","touchMove","touchEnd","keyDown","keyUp","timer","move","b","shoot_cooldown","bullet","Bullet","targetTouches","target","clientY","innerHeight","shoot","clientX","preventDefault","stopPropagation","changedTouches","checkCollisions","colliding"],"mappings":";;;;;;;;;;;;IAAMA,I;AAEL,iBAAc;AAAA;;AACb,OAAKC,MAAL,GAAc,IAAd;AACA,OAAKC,cAAL,GAAsB,CAAtB;AACA,OAAKC,aAAL,GAAqB,CAArB;AACA,OAAKC,YAAL,GAAoB,EAApB;AACA,OAAKC,cAAL,GAAsB,EAAtB;AACA,OAAKC,KAAL,GAAa,CAAb;AACA,OAAKC,aAAL,GAAqB,KAAKL,cAAL,GAAsB,KAAKC,aAA3B,GAA2C,KAAKC,YAAhD,GAA+D,KAAKC,cAAzF;;AAEA,OAAKG,YAAL,GAAoBC,SAASC,gBAAT,CAA0B,YAA1B,CAApB;AACA,OAAKC,WAAL,GAAmB,EAAnB;;AAEA,OAAKC,cAAL;AACA,OAAKC,QAAL;AACA;;;;6BAEU;AAAA;;AACV,QAAKL,YAAL,CAAkBM,OAAlB,CAA0B,UAACC,GAAD,EAAMC,CAAN,EAAY;AACrCC,eAAW,YAAM;AAChBF,SAAIG,iBAAJ,CAAsBC,SAAtB,CAAgCC,GAAhC,CAAoC,MAApC;AACA,KAFD,EAEGJ,IAAI,GAFP;AAGA,IAJD;AAKA,QAAKK,WAAL,GAAmBJ,WAAW,KAAKK,SAAL,CAAeC,IAAf,CAAoB,IAApB,CAAX,EAAsC,KAAKf,YAAL,CAAkBgB,MAAlB,GAA2B,GAAjE,CAAnB;;AAEA,OAAI,CAAC,KAAKC,KAAV,EAAiB;AAChBhB,aAASiB,IAAT,CAAcC,gBAAd,CAA+B,SAA/B,EAA0C,aAAK;AAC9C,SAAIC,KAAKC,EAAEC,OAAF,GAAYD,EAAEC,OAAd,GAAwBD,EAAEE,KAAnC;AACA,SAAIH,MAAM,EAAV,EAAc;AACb,YAAKI,QAAL;AACA,YAAKC,UAAL;AACA;AACD,KAND;AAOAxB,aAASkB,gBAAT,CAA0B,YAA1B,EAAwC,YAAY,CAAG,CAAvD,EAAyD,KAAzD;AACA,SAAKF,KAAL,GAAa,IAAb;AACA;AACD;;;8BAEW;AAAA;;AACXhB,YAASiB,IAAT,CAAcP,SAAd,CAAwBC,GAAxB,CAA4B,UAA5B;AACA,QAAKc,UAAL;AACA,QAAK5B,KAAL,GAAa,CAAb;AACA,QAAK6B,WAAL;;AAEA;AACA,OAAIC,QAAQ,CAAC,EAAb;AACA,OAAIC,gBAAgB,GAApB;AACA,QAAKC,UAAL,GAAkBC,YAAY,YAAM;AACnC,QAAIH,QAAQ,EAAR,IAAc,CAAlB,EAAqB;AACpBC,sBAAiB,CAAC,CAAlB;AACA,SAAID,QAAQ,GAAZ,EAAiB;AAChB,aAAKzB,WAAL,CAAiB6B,GAAjB,CAAqB;AAAA,cAAKxB,EAAEyB,CAAF,IAAO,CAAZ;AAAA,OAArB;AACA;AACD;AACD,WAAK9B,WAAL,CAAiB6B,GAAjB,CAAqB;AAAA,YAAKxB,EAAE0B,CAAF,IAAOL,aAAZ;AAAA,KAArB;AACA,WAAK1B,WAAL,CAAiB6B,GAAjB,CAAqB;AAAA,YAAKxB,EAAE2B,MAAF,EAAL;AAAA,KAArB;AACA,QAAI,OAAKhC,WAAL,CAAiBa,MAAjB,IAA2B,CAA/B,EAAkC;AACjC,YAAKoB,SAAL;AACA;AACDR;AACA,IAbiB,EAaf,GAbe,CAAlB;;AAeA,QAAKS,UAAL,CAAgB1B,SAAhB,CAA0BC,GAA1B,CAA8B,QAA9B;AACA,QAAKyB,UAAL,CAAgBC,QAAhB,GAA2B,CAAC,CAA5B;AACA,QAAKD,UAAL,CAAgBE,KAAhB;;AAEA,QAAK9C,MAAL,GAAc,IAAI+C,MAAJ,EAAd;AACA;;;6BAEU;AACVC,gBAAa,KAAK5B,WAAlB;AACA6B,iBAAc,KAAKZ,UAAnB;AACA,QAAK3B,WAAL,CAAiB6B,GAAjB,CAAqB;AAAA,WAAKW,EAAEC,OAAF,EAAL;AAAA,IAArB;AACA,QAAKzC,WAAL,GAAmB,EAAnB;AACA,OAAI,KAAKV,MAAT,EAAiB;AAChB,SAAKA,MAAL,CAAYmD,OAAZ;AACA,WAAO,KAAKnD,MAAZ;AACA;AACD;;;8BAEW;AACX,QAAK+B,QAAL;AACA,QAAKqB,UAAL,GAAkB5C,SAAS6C,aAAT,CAAuB,KAAvB,CAAlB;AACA,QAAKD,UAAL,CAAgBlC,SAAhB,CAA0BC,GAA1B,CAA8B,aAA9B;AACA,QAAKiC,UAAL,CAAgBE,SAAhB,oCAA2D,KAAKjD,KAAhE;AACA,OAAIkD,MAAM,KAAKH,UAAL,CAAgBI,aAAhB,CAA8B,MAA9B,CAAV;AACAD,OAAI7B,gBAAJ,CAAqB,OAArB,EAA8B,KAAKM,UAAL,CAAgBV,IAAhB,CAAqB,IAArB,CAA9B;AACAiC,OAAI7B,gBAAJ,CAAqB,UAArB,EAAiC,KAAKM,UAAL,CAAgBV,IAAhB,CAAqB,IAArB,CAAjC;AACAd,YAASiB,IAAT,CAAcgC,WAAd,CAA0B,KAAKL,UAA/B;AACA;;;+BAEY;AACZ5C,YAASiB,IAAT,CAAcP,SAAd,CAAwBwC,MAAxB,CAA+B,UAA/B;AACAlD,YAASiB,IAAT,CAAckC,mBAAd,CAAkC,WAAlC,EAA+C,KAAKC,cAApD,EAAoE,KAApE;AACA,OAAI,KAAKR,UAAT,EAAqB;AACpB,SAAKA,UAAL,CAAgBS,UAAhB,CAA2BC,WAA3B,CAAuC,KAAKV,UAA5C;AACA;AACD,QAAK7C,YAAL,CAAkBM,OAAlB,CAA0B,eAAO;AAChCC,QAAIG,iBAAJ,CAAsBC,SAAtB,CAAgCwC,MAAhC,CAAuC,MAAvC;AACA,IAFD;AAGA,QAAKd,UAAL,CAAgBiB,UAAhB,CAA2BC,WAA3B,CAAuC,KAAKlB,UAA5C;AACA,UAAO,KAAKA,UAAZ;AACA,QAAKjC,cAAL;AACA,QAAKC,QAAL;AACA;;;mCAEgB;AAAA;;AAChB,OAAI,CAAC,KAAKgC,UAAV,EAAsB;AACrB,SAAKA,UAAL,GAAkBpC,SAAS6C,aAAT,CAAuB,KAAvB,CAAlB;AACA,SAAKT,UAAL,CAAgB1B,SAAhB,CAA0BC,GAA1B,CAA8B,YAA9B;AACA;AACD,OAAI4C,WAAW,SAAXA,QAAW,CAACC,EAAD,EAAKC,EAAL,EAASC,EAAT,EAAaC,EAAb,EAAoB;AAClC,WAAOC,KAAKC,IAAL,CAAU,CAACH,KAAKF,EAAN,KAAaE,KAAKF,EAAlB,IAAwB,CAACG,KAAKF,EAAN,KAAaE,KAAKF,EAAlB,CAAlC,CAAP;AACA,IAFD;;AALgB;AASf,QAAIxB,IAAI2B,KAAKE,MAAL,KAAgB,GAAxB;AACA,QAAI9B,IAAI4B,KAAKE,MAAL,KAAgB,GAAxB;AACA,WAAO,OAAK5D,WAAL,CAAiB6D,MAAjB,CAAwB;AAAA,YAASR,SAASS,MAAM/B,CAAf,EAAkB+B,MAAMhC,CAAxB,EAA2BC,CAA3B,EAA8BD,CAA9B,IAAmC,EAA5C;AAAA,KAAxB,EAAwEjB,MAA/E,EAAuF;AACtFkB,SAAI2B,KAAKE,MAAL,KAAgB,GAApB;AACA9B,SAAI4B,KAAKE,MAAL,KAAgB,GAApB;AACA;AACA;AACD,QAAIG,KAAKjE,SAAS6C,aAAT,CAAuB,MAAvB,CAAT;AACA,QAAImB,QAAQ,UAAZ;AACA,QAAI,OAAK9D,WAAL,CAAiBa,MAAjB,GAA0B,OAAKtB,cAAnC,EAAmD;AAClDuE,aAAQ,UAAR;AACAC,QAAGnB,SAAH,GAAe,+eAAf;AACA,KAHD,MAGO,IAAI,OAAK5C,WAAL,CAAiBa,MAAjB,GAA0B,OAAKtB,cAAL,GAAsB,OAAKC,aAAzD,EAAwE;AAC9EsE,aAAQ,SAAR;AACA,KAFM,MAEA,IAAI,OAAK9D,WAAL,CAAiBa,MAAjB,GAA0B,OAAKtB,cAAL,GAAsB,OAAKC,aAA3B,GAA2C,OAAKC,YAA9E,EAA4F;AAClGqE,aAAQ,QAAR;AACA,KAFM,MAEA;AACNC,QAAGnB,SAAH,GAAe,qQAAf;AACA;AACDmB,OAAGvD,SAAH,CAAaC,GAAb,CAAiBqD,KAAjB;AACAC,OAAGC,KAAH,CAASC,SAAT,GAAqB,YAAaP,KAAKQ,KAAL,CAAWR,KAAKE,MAAL,KAAgB,EAA3B,IAAiC,EAA9C,GAAoD,MAAzE;AACAG,OAAGvD,SAAH,CAAaC,GAAb,CAAiB,WAAWiD,KAAKS,GAAL,CAAS,CAAT,EAAYT,KAAKU,KAAL,CAAWV,KAAKE,MAAL,KAAgB,CAAhB,GAAoB,CAA/B,CAAZ,CAA5B;AACA,WAAK1B,UAAL,CAAgBa,WAAhB,CAA4BgB,EAA5B;AACA,WAAK/D,WAAL,CAAiBqE,IAAjB,CAAsB,IAAIC,KAAJ,CAAUvC,CAAV,EAAaD,CAAb,EAAgBiC,EAAhB,EAAoBD,KAApB,CAAtB;AAhCe;;AAQhB,UAAO,KAAK9D,WAAL,CAAiBa,MAAjB,GAA0B,KAAKjB,aAAtC,EAAqD;AAAA;AAyBpD;AACDE,YAASiB,IAAT,CAAcwD,YAAd,CAA2B,KAAKrC,UAAhC,EAA4CpC,SAASiB,IAAT,CAAcyD,UAAd,CAAyB,CAAzB,CAA5C;AACA;;;gCAEa;AACb,OAAI7E,QAAQ,KAAKuC,UAAL,CAAgBY,aAAhB,CAA8B,QAA9B,CAAZ;AACA,OAAI,CAACnD,KAAL,EAAY;AACXA,YAAQG,SAAS6C,aAAT,CAAuB,MAAvB,CAAR;AACAhD,UAAMa,SAAN,CAAgBC,GAAhB,CAAoB,OAApB;AACA,SAAKyB,UAAL,CAAgBa,WAAhB,CAA4BpD,KAA5B;AACA;AACDA,SAAMiD,SAAN,GAAkB,KAAKjD,KAAvB;AACA;;;+BAEY;AAAA;;AACZ,OAAI8E,YAAY,GAAhB;AACA,OAAIC,mBAAJ;AACA,QAAK1E,WAAL,CAAiB6B,GAAjB,CAAqB,UAACW,CAAD,EAAInC,CAAJ,EAAU;AAC9B,QAAIqE,cAAcA,cAAclC,EAAEsB,KAAlC,EAAyC;AACxCW,iBAAY,GAAZ;AACA;AACD,QAAIjC,EAAEsB,KAAF,IAAW,UAAf,EAA2B;AAC1BtB,OAAET,CAAF,GAAM0C,YAAY,OAAKlF,cAAjB,GAAkC,GAAxC;AACAiD,OAAEV,CAAF,GAAM,EAAN;AACA,KAHD,MAGO,IAAIU,EAAEsB,KAAF,IAAW,SAAf,EAA0B;AAChCtB,OAAET,CAAF,GAAM0C,YAAY,OAAKjF,aAAjB,GAAiC,GAAvC;AACAgD,OAAEV,CAAF,GAAM,EAAN;AACA,KAHM,MAGA,IAAIU,EAAEsB,KAAF,IAAW,QAAf,EAAyB;AAC/BtB,OAAET,CAAF,GAAM0C,YAAY,OAAKhF,YAAjB,GAAgC,GAAtC;AACA+C,OAAEV,CAAF,GAAM,EAAN;AACA,KAHM,MAGA;AACNU,OAAET,CAAF,GAAM0C,YAAY,OAAK/E,cAAjB,GAAkC,GAAxC;AACA8C,OAAEV,CAAF,GAAM,EAAN;AACA;AACDU,MAAER,MAAF;AACAyC;AACAC,iBAAalC,EAAEsB,KAAf;AACA,IApBD;AAqBA;;;;;;IAGIa,U;AACL,qBAAY5C,CAAZ,EAAeD,CAAf,EAAkB8C,OAAlB,EAA2Bd,KAA3B,EAAkC;AAAA;;AAAA;;AACjC,OAAK/B,CAAL,GAASA,CAAT;AACA,OAAKD,CAAL,GAASA,CAAT;AACA,OAAKiC,EAAL,GAAUa,OAAV;AACA,OAAKb,EAAL,CAAQC,KAAR,CAAca,UAAd,GAA2B,kBAA3B;AACA,OAAKd,EAAL,CAAQvD,SAAR,CAAkBC,GAAlB,CAAsB,OAAtB;AACA,OAAKsD,EAAL,CAAQvD,SAAR,CAAkBC,GAAlB,CAAsBqD,KAAtB;AACA,OAAKA,KAAL,GAAaA,KAAb;AACA;AACA,OAAK9B,MAAL;AACA1B,aAAW,YAAM;AAChB,UAAKwE,KAAL,GAAa,OAAKf,EAAL,CAAQgB,WAAR,GAAsBC,OAAOC,UAA7B,GAA0C,GAAvD;AACA,OAAInB,SAAS,UAAb,EAAyB;AACxB,WAAKgB,KAAL,IAAc,CAAd;AACA,IAFD,MAEO,IAAIhB,SAAS,SAAb,EAAwB;AAC9B,WAAKgB,KAAL,IAAc,CAAd;AACA;AACD,GAPD,EAOG,EAPH;AAQA;;;;4BACS;AACT,OAAI,KAAKf,EAAL,CAAQZ,UAAZ,EAAwB;AACvB,SAAKY,EAAL,CAAQZ,UAAR,CAAmBC,WAAnB,CAA+B,KAAKW,EAApC;AACA;AACD;;;2BACQ;AACR,QAAKA,EAAL,CAAQC,KAAR,CAAcC,SAAd,kBAAuC,KAAKlC,CAA5C,YAAoD,CAAC,MAAM,KAAKD,CAAZ,IAAiB,CAAC,CAAtE;AACA,QAAKiC,EAAL,CAAQC,KAAR,CAAckB,eAAd,kBAA6C,KAAKnD,CAAlD,YAA0D,CAAC,MAAM,KAAKD,CAAZ,IAAiB,CAAC,CAA5E;AACA;;;;;;IAGIwC,K;;;;;;;;;;;4BACK;AACT;AACAa,QAAKxF,KAAL;AACAwF,QAAK3D,WAAL;AACA;;;;EALkBmD,U;;IAQdtC,M;;;AACL,mBAAc;AAAA;;AAAA,+GACP,EADO,EACH,EADG,EACCvC,SAAS6C,aAAT,CAAuB,MAAvB,CADD,EACiC,QADjC;;AAEb,SAAKyC,MAAL,GAAc,CAAd;AACA,SAAKrB,EAAL,CAAQC,KAAR,CAAca,UAAd,GAA2B,mBAA3B;;AAEA,SAAK3C,UAAL,GAAkBpC,SAASgD,aAAT,CAAuB,aAAvB,CAAlB;AACA,SAAKZ,UAAL,CAAgBa,WAAhB,CAA4B,OAAKgB,EAAjC;;AAEA,SAAKsB,IAAL;AACA,SAAKrD,MAAL;;AAEA,SAAKsD,OAAL,GAAe,EAAf;AAXa;AAYb;;;;yBACM;AAAA;;AACN,QAAKpD,UAAL,CAAgBlB,gBAAhB,CAAiC,YAAjC,EAA+C,KAAKuE,SAAL,CAAe3E,IAAf,CAAoB,IAApB,CAA/C,EAA0E,KAA1E;AACA,QAAKsB,UAAL,CAAgBlB,gBAAhB,CAAiC,WAAjC,EAA8C,KAAKuE,SAAL,CAAe3E,IAAf,CAAoB,IAApB,CAA9C,EAAyE,KAAzE;AACA,QAAKsB,UAAL,CAAgBlB,gBAAhB,CAAiC,UAAjC,EAA6C,KAAKwE,QAAL,CAAc5E,IAAd,CAAmB,IAAnB,CAA7C,EAAuE,KAAvE;AACA,QAAKsB,UAAL,CAAgBlB,gBAAhB,CAAiC,SAAjC,EAA4C,KAAKyE,OAAL,CAAa7E,IAAb,CAAkB,IAAlB,CAA5C,EAAqE,KAArE;AACA,QAAKsB,UAAL,CAAgBlB,gBAAhB,CAAiC,OAAjC,EAA0C,KAAK0E,KAAL,CAAW9E,IAAX,CAAgB,IAAhB,CAA1C,EAAiE,KAAjE;AACA,QAAK+E,KAAL,GAAa/D,YAAY,YAAM;AAC9B,WAAKgE,IAAL,GAAY5D,MAAZ;AACA,WAAKsD,OAAL,CAAazD,GAAb,CAAiB;AAAA,YAAKgE,EAAE7D,MAAF,EAAL;AAAA,KAAjB;AACA,IAHY,EAGV,EAHU,CAAb;AAIA;;;4BACS;AACT;AACAO,iBAAc,KAAKoD,KAAnB;AACA,QAAKzD,UAAL,CAAgBe,mBAAhB,CAAoC,YAApC,EAAkD,KAAKsC,SAAL,CAAe3E,IAAf,CAAoB,IAApB,CAAlD,EAA6E,KAA7E;AACA,QAAKsB,UAAL,CAAgBe,mBAAhB,CAAoC,WAApC,EAAiD,KAAKsC,SAAL,CAAe3E,IAAf,CAAoB,IAApB,CAAjD,EAA4E,KAA5E;AACA,QAAKsB,UAAL,CAAgBe,mBAAhB,CAAoC,UAApC,EAAgD,KAAKuC,QAAL,CAAc5E,IAAd,CAAmB,IAAnB,CAAhD,EAA0E,KAA1E;AACA,QAAKsB,UAAL,CAAgBe,mBAAhB,CAAoC,SAApC,EAA+C,KAAKwC,OAAL,CAAa7E,IAAb,CAAkB,IAAlB,CAA/C,EAAwE,KAAxE;AACA,QAAKsB,UAAL,CAAgBe,mBAAhB,CAAoC,OAApC,EAA6C,KAAKyC,KAAL,CAAW9E,IAAX,CAAgB,IAAhB,CAA7C,EAAoE,KAApE;AACA,QAAK0E,OAAL,CAAazD,GAAb,CAAiB;AAAA,WAAKgE,EAAEpD,OAAF,EAAL;AAAA,IAAjB;AACA,QAAK6C,OAAL,GAAe,EAAf;AACA;;;yBACM;AACN,OAAI,KAAKM,IAAL,KAAc,CAAlB,EAAqB;AACpB,WAAO,IAAP;AACA;AACD,QAAK7D,CAAL,IAAU,KAAKqD,MAAL,GAAc,GAAxB;AACA,OAAI,KAAKrD,CAAL,GAAS,CAAb,EAAgB;AACf,SAAKA,CAAL,GAAS,CAAT;AACA,IAFD,MAEO,IAAI,KAAKA,CAAL,GAAS,GAAb,EAAkB;AACxB,SAAKA,CAAL,GAAS,GAAT;AACA;AACD,UAAO,IAAP;AACA;;;0BACO;AAAA;;AACP,OAAI,KAAK+D,cAAT,EAAyB;AACxB;AACA;AACD,OAAIC,SAAS,IAAIC,MAAJ,CAAW,KAAKjE,CAAhB,EAAmB,KAAKD,CAAxB,CAAb;AACA,QAAKI,UAAL,CAAgBa,WAAhB,CAA4BgD,OAAOhC,EAAnC;AACA,QAAKuB,OAAL,CAAajB,IAAb,CAAkB0B,MAAlB;AACA,QAAKD,cAAL,GAAsB,IAAtB;AACAxF,cAAW,YAAM;AAChB,WAAKwF,cAAL,GAAsB,KAAtB;AACA,IAFD,EAEG,EAFH;AAGA;;;4BACS5E,C,EAAG;AACZ,QAAK,IAAIb,IAAI,CAAb,EAAgBA,IAAIa,EAAE+E,aAAF,CAAgBpF,MAApC,EAA4CR,GAA5C,EAAiD;AAChD,QAAM6F,SAAShF,EAAE+E,aAAF,CAAgB5F,CAAhB,CAAf;AACA,QAAI6F,OAAOC,OAAP,GAAiBnB,OAAOoB,WAAP,GAAqB,GAA1C,EAA+C;AAC9C,UAAKC,KAAL;AACA,KAFD,MAEO;AACN,SAAIH,OAAOI,OAAP,GAAiBtB,OAAOC,UAAP,GAAoB,GAAzC,EAA8C;AAC7C,WAAKG,MAAL,GAAc,CAAC,CAAf;AACA,MAFD,MAEO;AACN,WAAKA,MAAL,GAAc,CAAd;AACA;AACD;AACD;AACDlE,KAAEqF,cAAF;AACArF,KAAEsF,eAAF;AACA;;;2BACQtF,C,EAAG;AACX,QAAK,IAAIb,IAAI,CAAb,EAAgBA,IAAIa,EAAEuF,cAAF,CAAiB5F,MAArC,EAA6CR,GAA7C,EAAkD;AACjD,QAAM6F,SAAShF,EAAEuF,cAAF,CAAiBpG,CAAjB,CAAf;AACA,QAAI6F,OAAOC,OAAP,GAAiBnB,OAAOoB,WAAP,GAAqB,GAA1C,EAA+C;AAC9C,UAAKhB,MAAL,GAAc,CAAd;AACA;AACD;AACD;;;0BACOlE,C,EAAG;AACV,OAAID,KAAKC,EAAEC,OAAF,GAAYD,EAAEC,OAAd,GAAwBD,EAAEE,KAAnC;AACA,OAAIH,MAAM,EAAV,EAAc;AACb,SAAKmE,MAAL,GAAc,CAAC,CAAf;AACA,WAAO,KAAP;AACA,IAHD,MAGO,IAAInE,MAAM,EAAV,EAAc;AACpB,SAAKmE,MAAL,GAAc,CAAd;AACA,WAAO,KAAP;AACA,IAHM,MAGA,IAAInE,MAAM,EAAV,EAAc;AACpB,SAAKoF,KAAL;AACA,WAAO,KAAP;AACA;AACD;;;wBACKnF,C,EAAG;AACR,OAAID,KAAKC,EAAEC,OAAF,GAAYD,EAAEC,OAAd,GAAwBD,EAAEE,KAAnC;AACA,OAAIH,MAAM,EAAV,EAAc;AACb,SAAKmE,MAAL,GAAc,CAAd;AACA,IAFD,MAEO,IAAInE,MAAM,EAAV,EAAc;AACpB,SAAKmE,MAAL,GAAc,CAAd;AACA;AACD;;;;EAxGmBT,U;;IA2GfqB,M;;;AACL,iBAAYjE,CAAZ,EAAeD,CAAf,EAAkB;AAAA;;AAAA,gHACXC,CADW,EACRD,CADQ,EACLhC,SAAS6C,aAAT,CAAuB,MAAvB,CADK,EAC2B,QAD3B;;AAEjB,UAAKiD,IAAL;AAFiB;AAGjB;;;;yBACM;AAAA;;AACN,QAAKD,KAAL,GAAa/D,YAAY,YAAM;AAC9B,YAAKE,CAAL,IAAU,GAAV;AACA,QAAI,QAAKA,CAAL,GAAS,CAAT,IAAc,QAAK4E,eAAL,EAAlB,EAA0C;AACzC,aAAKjE,OAAL;AACA;AACD,IALY,EAKV,EALU,CAAb;AAMA,UAAO,IAAP;AACA;;;4BACS;AACT;AACAF,iBAAc,KAAKoD,KAAnB;AACA;;;oCACiB;AAAA;;AACjB,OAAMgB,YAAYxB,KAAKnF,WAAL,CAAiB6D,MAAjB,CAAwB,aAAK;AAC9C,WAAOrB,EAAET,CAAF,GAAMS,EAAEsC,KAAR,GAAgB,QAAK/C,CAArB,IAA0BS,EAAET,CAAF,GAAMS,EAAEsC,KAAR,GAAgB,QAAK/C,CAA/C,IAAoDS,EAAEV,CAAF,GAAM,QAAKA,CAAL,GAAS,GAAnE,IAA0EU,EAAEV,CAAF,GAAM,QAAKA,CAAL,GAAS,GAAhG;AACA,IAFiB,CAAlB;AAGA6E,aAAU9E,GAAV,CAAc;AAAA,WAAKW,EAAEC,OAAF,EAAL;AAAA,IAAd;AACA0C,QAAKnF,WAAL,GAAmBmF,KAAKnF,WAAL,CAAiB6D,MAAjB,CAAwB,aAAK;AAC/C,WAAO,EAAErB,EAAET,CAAF,GAAMS,EAAEsC,KAAR,GAAgB,QAAK/C,CAArB,IAA0BS,EAAET,CAAF,GAAMS,EAAEsC,KAAR,GAAgB,QAAK/C,CAA/C,IAAoDS,EAAEV,CAAF,GAAM,QAAKA,CAAL,GAAS,GAAnE,IAA0EU,EAAEV,CAAF,GAAM,QAAKA,CAAL,GAAS,GAA3F,CAAP;AACA,IAFkB,CAAnB;AAGA,UAAO,CAAC,CAAC6E,UAAU9F,MAAnB;AACA;;;;EA3BmB8D,U;;AA8BrBK,OAAOG,IAAP,GAAc,IAAI9F,IAAJ,EAAd","file":"game.js","sourcesContent":["class Game {\n\n\tconstructor() {\n\t\tthis.player = null\n\t\tthis.total_squiggle = 8\n\t\tthis.total_bubbles = 8\n\t\tthis.total_square = 20\n\t\tthis.total_triangle = 20\n\t\tthis.score = 0\n\t\tthis.total_objects = this.total_squiggle + this.total_bubbles + this.total_square + this.total_triangle\n\n\t\tthis.body_content = document.querySelectorAll('body > .sw')\n\t\tthis.gameobjects = []\n\n\t\tthis.initBackground()\n\t\tthis.initGame()\n\t}\n\n\tinitGame() {\n\t\tthis.body_content.forEach((row, i) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\trow.firstElementChild.classList.add('fall')\n\t\t\t}, i * 600)\n\t\t})\n\t\tthis.start_timer = setTimeout(this.startGame.bind(this), this.body_content.length * 600)\n\n\t\tif (!this.ready) {\n\t\t\tdocument.body.addEventListener('keydown', e => {\n\t\t\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\t\t\tif (kc == 27) {\n\t\t\t\t\tthis.stopGame()\n\t\t\t\t\tthis.finishGame()\n\t\t\t\t}\n\t\t\t})\n\t\t\tdocument.addEventListener(\"touchstart\", function () { }, false)\n\t\t\tthis.ready = true\n\t\t}\n\t}\n\n\tstartGame() {\n\t\tdocument.body.classList.add('gamemode')\n\t\tthis.sortShapes()\n\t\tthis.score = 0\n\t\tthis.renderScore()\n\n\t\t// Move enemies left & right\n\t\tlet count = -15\n\t\tlet move_distance = 0.2\n\t\tthis.game_timer = setInterval(() => {\n\t\t\tif (count % 30 == 0) {\n\t\t\t\tmove_distance *= -1\n\t\t\t\tif (count < 300) {\n\t\t\t\t\tthis.gameobjects.map(i => i.y += 5)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.gameobjects.map(i => i.x += move_distance)\n\t\t\tthis.gameobjects.map(i => i.render())\n\t\t\tif (this.gameobjects.length == 0) {\n\t\t\t\tthis.winScreen()\n\t\t\t}\n\t\t\tcount++\n\t\t}, 150)\n\n\t\tthis.background.classList.add('active')\n\t\tthis.background.tabIndex = -1\n\t\tthis.background.focus()\n\n\t\tthis.player = new Player()\n\t}\n\n\tstopGame() {\n\t\tclearTimeout(this.start_timer)\n\t\tclearInterval(this.game_timer)\n\t\tthis.gameobjects.map(o => o.destroy())\n\t\tthis.gameobjects = []\n\t\tif (this.player) {\n\t\t\tthis.player.destroy()\n\t\t\tdelete this.player\n\t\t}\n\t}\n\n\twinScreen() {\n\t\tthis.stopGame()\n\t\tthis.win_screen = document.createElement('div')\n\t\tthis.win_screen.classList.add('win-overlay')\n\t\tthis.win_screen.innerHTML = `<h1>You win!</h1><h2>Score: ${this.score}</h2><button class='btn'>Restart</button>`\n\t\tlet btn = this.win_screen.querySelector('.btn')\n\t\tbtn.addEventListener('click', this.finishGame.bind(this))\n\t\tbtn.addEventListener('touchend', this.finishGame.bind(this))\n\t\tdocument.body.appendChild(this.win_screen)\n\t}\n\n\tfinishGame() {\n\t\tdocument.body.classList.remove('gamemode')\n\t\tdocument.body.removeEventListener(\"touchmove\", this._preventScroll, false);\n\t\tif (this.win_screen) {\n\t\t\tthis.win_screen.parentNode.removeChild(this.win_screen)\n\t\t}\n\t\tthis.body_content.forEach(row => {\n\t\t\trow.firstElementChild.classList.remove('fall')\n\t\t})\n\t\tthis.background.parentNode.removeChild(this.background)\n\t\tdelete this.background\n\t\tthis.initBackground()\n\t\tthis.initGame()\n\t}\n\n\tinitBackground() {\n\t\tif (!this.background) {\n\t\t\tthis.background = document.createElement('div')\n\t\t\tthis.background.classList.add('background')\n\t\t}\n\t\tlet distance = (x1, y1, x2, y2) => {\n\t\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n\t\t}\n\t\twhile (this.gameobjects.length < this.total_objects) {\n\t\t\tlet x = Math.random() * 100\n\t\t\tlet y = Math.random() * 100\n\t\t\twhile (this.gameobjects.filter(shape => distance(shape.x, shape.y, x, y) < 10).length) {\n\t\t\t\tx = Math.random() * 100\n\t\t\t\ty = Math.random() * 100\n\t\t\t\t// console.count('fails')\n\t\t\t}\n\t\t\tlet el = document.createElement('span')\n\t\t\tlet shape = 'triangle'\n\t\t\tif (this.gameobjects.length < this.total_squiggle) {\n\t\t\t\tshape = 'squiggle'\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"362\" height=\"42.125\" viewBox=\"0 0 362 42.125\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"10px\" fill-rule=\"evenodd\" d=\"M25,160c10.473-19.526,21.555-33.2,32-32,14.376,1.653,19.472,32,32,32,12.873,0,19.127-32,32-32s19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32c12.527,0,17.624,30.347,32,32,10.445,1.2,21.527-12.474,32-32\" transform=\"translate(-20 -122.938)\"/></svg>'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles) {\n\t\t\t\tshape = 'bubbles'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles + this.total_square) {\n\t\t\t\tshape = 'square'\n\t\t\t} else {\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"226\" height=\"199\" viewBox=\"0 0 226 199\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"12px\" fill-rule=\"evenodd\" d=\"M21,235L128,48,235,235H21Z\" transform=\"translate(-15 -42)\"/></svg>'\n\t\t\t}\n\t\t\tel.classList.add(shape)\n\t\t\tel.style.transform = 'rotate(' + (Math.round(Math.random() * 18) * 20) + 'deg)'\n\t\t\tel.classList.add('color-' + Math.min(3, Math.floor(Math.random() * 4 + 1)))\n\t\t\tthis.background.appendChild(el)\n\t\t\tthis.gameobjects.push(new Enemy(x, y, el, shape))\n\t\t}\n\t\tdocument.body.insertBefore(this.background, document.body.childNodes[0])\n\t}\n\n\trenderScore() {\n\t\tlet score = this.background.querySelector('.score')\n\t\tif (!score) {\n\t\t\tscore = document.createElement('span')\n\t\t\tscore.classList.add('score')\n\t\t\tthis.background.appendChild(score)\n\t\t}\n\t\tscore.innerHTML = this.score\n\t}\n\n\tsortShapes() {\n\t\tlet col_count = 0.5\n\t\tlet last_shape\n\t\tthis.gameobjects.map((o, i) => {\n\t\t\tif (last_shape && last_shape != o.shape) {\n\t\t\t\tcol_count = 0.5\n\t\t\t}\n\t\t\tif (o.shape == 'squiggle') {\n\t\t\t\to.x = col_count / this.total_squiggle * 100\n\t\t\t\to.y = 10\n\t\t\t} else if (o.shape == 'bubbles') {\n\t\t\t\to.x = col_count / this.total_bubbles * 100\n\t\t\t\to.y = 20\n\t\t\t} else if (o.shape == 'square') {\n\t\t\t\to.x = col_count / this.total_square * 100\n\t\t\t\to.y = 30\n\t\t\t} else {\n\t\t\t\to.x = col_count / this.total_triangle * 100\n\t\t\t\to.y = 40\n\t\t\t}\n\t\t\to.render()\n\t\t\tcol_count++\n\t\t\tlast_shape = o.shape\n\t\t})\n\t}\n}\n\nclass GameObject {\n\tconstructor(x, y, element, shape) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.el = element\n\t\tthis.el.style.transition = 'all .2s ease-out'\n\t\tthis.el.classList.add('shape')\n\t\tthis.el.classList.add(shape)\n\t\tthis.shape = shape\n\t\t// this.width = this.el.clientWidth\n\t\tthis.render()\n\t\tsetTimeout(() => {\n\t\t\tthis.width = this.el.clientWidth / window.innerWidth * 100\n\t\t\tif (shape == 'squiggle') {\n\t\t\t\tthis.width /= 2\n\t\t\t} else if (shape == 'bubbles') {\n\t\t\t\tthis.width *= 3\n\t\t\t}\n\t\t}, 10)\n\t}\n\tdestroy() {\n\t\tif (this.el.parentNode) {\n\t\t\tthis.el.parentNode.removeChild(this.el)\n\t\t}\n\t}\n\trender() {\n\t\tthis.el.style.transform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t\tthis.el.style.webkitTransform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t}\n}\n\nclass Enemy extends GameObject {\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tgame.score++\n\t\tgame.renderScore()\n\t}\n}\n\nclass Player extends GameObject {\n\tconstructor() {\n\t\tsuper(50, 95, document.createElement('span'), 'player')\n\t\tthis.moving = 0\n\t\tthis.el.style.transition = 'all .05s ease-out'\n\n\t\tthis.background = document.querySelector('.background')\n\t\tthis.background.appendChild(this.el)\n\n\t\tthis.init()\n\t\tthis.render()\n\n\t\tthis.bullets = []\n\t}\n\tinit() {\n\t\tthis.background.addEventListener(\"touchstart\", this.touchMove.bind(this), false)\n\t\tthis.background.addEventListener(\"touchmove\", this.touchMove.bind(this), false)\n\t\tthis.background.addEventListener(\"touchend\", this.touchEnd.bind(this), false)\n\t\tthis.background.addEventListener(\"keydown\", this.keyDown.bind(this), false)\n\t\tthis.background.addEventListener(\"keyup\", this.keyUp.bind(this), false)\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.move().render()\n\t\t\tthis.bullets.map(b => b.render())\n\t\t}, 16)\n\t}\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tclearInterval(this.timer)\n\t\tthis.background.removeEventListener(\"touchstart\", this.touchMove.bind(this), false)\n\t\tthis.background.removeEventListener(\"touchmove\", this.touchMove.bind(this), false)\n\t\tthis.background.removeEventListener(\"touchend\", this.touchEnd.bind(this), false)\n\t\tthis.background.removeEventListener(\"keydown\", this.keyDown.bind(this), false)\n\t\tthis.background.removeEventListener(\"keyup\", this.keyUp.bind(this), false)\n\t\tthis.bullets.map(b => b.destroy())\n\t\tthis.bullets = []\n\t}\n\tmove() {\n\t\tif (this.move === 0) {\n\t\t\treturn this\n\t\t}\n\t\tthis.x += this.moving * 0.5\n\t\tif (this.x < 0) {\n\t\t\tthis.x = 0\n\t\t} else if (this.x > 100) {\n\t\t\tthis.x = 100\n\t\t}\n\t\treturn this\n\t}\n\tshoot() {\n\t\tif (this.shoot_cooldown) {\n\t\t\treturn\n\t\t}\n\t\tlet bullet = new Bullet(this.x, this.y)\n\t\tthis.background.appendChild(bullet.el)\n\t\tthis.bullets.push(bullet)\n\t\tthis.shoot_cooldown = true\n\t\tsetTimeout(() => {\n\t\t\tthis.shoot_cooldown = false\n\t\t}, 69)\n\t}\n\ttouchMove(e) {\n\t\tfor (let i = 0; i < e.targetTouches.length; i++) {\n\t\t\tconst target = e.targetTouches[i]\n\t\t\tif (target.clientY < window.innerHeight * 0.8) {\n\t\t\t\tthis.shoot()\n\t\t\t} else {\n\t\t\t\tif (target.clientX < window.innerWidth * 0.5) {\n\t\t\t\t\tthis.moving = -1\n\t\t\t\t} else {\n\t\t\t\t\tthis.moving = 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\ttouchEnd(e) {\n\t\tfor (let i = 0; i < e.changedTouches.length; i++) {\n\t\t\tconst target = e.changedTouches[i]\n\t\t\tif (target.clientY > window.innerHeight * 0.8) {\n\t\t\t\tthis.moving = 0\n\t\t\t}\n\t\t}\n\t}\n\tkeyDown(e) {\n\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\tif (kc == 37) {\n\t\t\tthis.moving = -1\n\t\t\treturn false\n\t\t} else if (kc == 39) {\n\t\t\tthis.moving = 1\n\t\t\treturn false\n\t\t} else if (kc == 32) {\n\t\t\tthis.shoot()\n\t\t\treturn false\n\t\t}\n\t}\n\tkeyUp(e) {\n\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\tif (kc == 37) {\n\t\t\tthis.moving = 0\n\t\t} else if (kc == 39) {\n\t\t\tthis.moving = 0\n\t\t}\n\t}\n}\n\nclass Bullet extends GameObject {\n\tconstructor(x, y) {\n\t\tsuper(x, y, document.createElement('span'), 'bullet')\n\t\tthis.move()\n\t}\n\tmove() {\n\t\tthis.timer = setInterval(() => {\n\t\t\tthis.y -= 0.5\n\t\t\tif (this.y < 0 || this.checkCollisions()) {\n\t\t\t\tthis.destroy()\n\t\t\t}\n\t\t}, 16)\n\t\treturn this\n\t}\n\tdestroy() {\n\t\tsuper.destroy()\n\t\tclearInterval(this.timer)\n\t}\n\tcheckCollisions() {\n\t\tconst colliding = game.gameobjects.filter(o => {\n\t\t\treturn o.x + o.width > this.x && o.x - o.width < this.x && o.y > this.y - 0.3 && o.y < this.y + 0.3\n\t\t})\n\t\tcolliding.map(o => o.destroy())\n\t\tgame.gameobjects = game.gameobjects.filter(o => {\n\t\t\treturn !(o.x + o.width > this.x && o.x - o.width < this.x && o.y > this.y - 0.3 && o.y < this.y + 0.3)\n\t\t})\n\t\treturn !!colliding.length\n\t}\n}\n\nwindow.game = new Game\n"]}
{"version":3,"sources":["game.js"],"names":["Game","total_squiggle","total_bubbles","total_square","total_triangle","total_objects","body_content","document","querySelectorAll","gameobjects","initBackground","initGame","player","Player","forEach","row","i","setTimeout","firstElementChild","classList","add","startGame","bind","length","body","style","overflow","addEventListener","_preventScroll","sortShapes","count","move_distance","game_timer","setInterval","map","y","x","render","kc","e","keyCode","which","stopGame","removeEventListener","remove","clearInterval","o","destroy","preventDefault","stopPropagation","background","createElement","distance","x1","y1","x2","y2","Math","sqrt","random","filter","shape","el","innerHTML","transform","round","min","floor","appendChild","push","GameObject","insertBefore","childNodes","col_count","last_shape","element","transition","parentNode","removeChild","webkitTransform","moving","init","querySelector","bullets","touchStart","touchEnd","shoot","move","b","bullet","Bullet","targetTouches","target","clientY","window","innerHeight","clientX","innerWidth","changedTouches","timer","checkCollisions","colliding","game"],"mappings":"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","file":"game.js","sourcesContent":["class Game {\n\n\tconstructor() {\n\t\tthis.total_squiggle = 8\n\t\tthis.total_bubbles = 8\n\t\tthis.total_square = 20\n\t\tthis.total_triangle = 20\n\t\tthis.total_objects = this.total_squiggle + this.total_bubbles + this.total_square + this.total_triangle\n\n\t\tthis.body_content = document.querySelectorAll('body > .sw')\n\t\tthis.gameobjects = []\n\n\t\tthis.initBackground()\n\t\tthis.initGame()\n\n\t\tthis.player = new Player()\n\t}\n\n\tinitGame() {\n\t\tthis.body_content.forEach((row, i) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\trow.firstElementChild.classList.add('fall')\n\t\t\t}, i * 600)\n\t\t})\n\t\tsetTimeout(this.startGame.bind(this), this.body_content.length * 600)\n\t}\n\n\tstartGame() {\n\t\tdocument.body.style.overflow = 'hidden'\n\t\tdocument.body.addEventListener(\"touchmove\", this._preventScroll, false)\n\t\tthis.sortShapes()\n\n\t\t// Move enemies left & right\n\t\tlet count = -15\n\t\tlet move_distance = 0.2\n\t\tthis.game_timer = setInterval(() => {\n\t\t\tif (count % 30 == 0) {\n\t\t\t\tmove_distance *= -1\n\t\t\t\tif (count < 300) {\n\t\t\t\t\tthis.gameobjects.map(i => i.y += 5)\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.gameobjects.map(i => i.x += move_distance)\n\t\t\tthis.gameobjects.map(i => i.render())\n\t\t\tcount++\n\t\t}, 150)\n\n\t\tdocument.body.addEventListener('keydown', e => {\n\t\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\t\tif (kc == 27) {\n\t\t\t\tthis.stopGame()\n\t\t\t}\n\t\t})\n\t}\n\n\tstopGame() {\n\t\tdocument.body.style.overflow = ''\n\t\tdocument.body.removeEventListener(\"touchmove\", this._preventScroll, false);\n\t\tthis.body_content.forEach(row => {\n\t\t\trow.firstElementChild.classList.remove('fall')\n\t\t})\n\t\tclearInterval(this.game_timer)\n\t\tthis.gameobjects.map(o => o.destroy())\n\t\tthis.gameobjects = []\n\t\tthis.initBackground()\n\t}\n\n\t_preventScroll(e) {\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\n\tinitBackground() {\n\t\tlet background = document.createElement('div')\n\t\tlet distance = (x1, y1, x2, y2) => {\n\t\t\treturn Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1))\n\t\t}\n\t\tbackground.classList.add('background')\n\t\twhile (this.gameobjects.length < this.total_objects) {\n\t\t\tlet x = Math.random() * 100\n\t\t\tlet y = Math.random() * 100\n\t\t\twhile (this.gameobjects.filter(shape => distance(shape.x, shape.y, x, y) < 10).length) {\n\t\t\t\tx = Math.random() * 100\n\t\t\t\ty = Math.random() * 100\n\t\t\t\t// console.count('fails')\n\t\t\t}\n\t\t\tlet el = document.createElement('span')\n\t\t\tlet shape = 'triangle'\n\t\t\tif (this.gameobjects.length < this.total_squiggle) {\n\t\t\t\tshape = 'squiggle'\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"362\" height=\"42.125\" viewBox=\"0 0 362 42.125\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"10px\" fill-rule=\"evenodd\" d=\"M25,160c10.473-19.526,21.555-33.2,32-32,14.376,1.653,19.472,32,32,32,12.873,0,19.127-32,32-32s19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32,19.127,32,32,32,19.127-32,32-32c12.527,0,17.624,30.347,32,32,10.445,1.2,21.527-12.474,32-32\" transform=\"translate(-20 -122.938)\"/></svg>'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles) {\n\t\t\t\tshape = 'bubbles'\n\t\t\t} else if (this.gameobjects.length < this.total_squiggle + this.total_bubbles + this.total_square) {\n\t\t\t\tshape = 'square'\n\t\t\t} else {\n\t\t\t\tel.innerHTML = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"226\" height=\"199\" viewBox=\"0 0 226 199\"><path fill=\"none\" stroke=\"currentColor\" stroke-linecap=\"round\" stroke-width=\"12px\" fill-rule=\"evenodd\" d=\"M21,235L128,48,235,235H21Z\" transform=\"translate(-15 -42)\"/></svg>'\n\t\t\t}\n\t\t\tel.classList.add(shape)\n\t\t\tel.style.transform = 'rotate(' + (Math.round(Math.random() * 18) * 20) + 'deg)'\n\t\t\tel.classList.add('color-' + Math.min(3, Math.floor(Math.random() * 4 + 1)))\n\t\t\tbackground.appendChild(el)\n\t\t\tthis.gameobjects.push(new GameObject(x, y, el, shape))\n\t\t}\n\t\tdocument.body.insertBefore(background, document.body.childNodes[0])\n\t}\n\n\tsortShapes() {\n\t\tlet col_count = 0.5\n\t\tlet last_shape\n\t\tthis.gameobjects.map((o, i) => {\n\t\t\tif (last_shape && last_shape != o.shape) {\n\t\t\t\tcol_count = 0.5\n\t\t\t}\n\t\t\tif (o.shape == 'squiggle') {\n\t\t\t\to.x = col_count / this.total_squiggle * 100\n\t\t\t\to.y = 10\n\t\t\t} else if (o.shape == 'bubbles') {\n\t\t\t\to.x = col_count / this.total_bubbles * 100\n\t\t\t\to.y = 20\n\t\t\t} else if (o.shape == 'square') {\n\t\t\t\to.x = col_count / this.total_square * 100\n\t\t\t\to.y = 30\n\t\t\t} else {\n\t\t\t\to.x = col_count / this.total_triangle * 100\n\t\t\t\to.y = 40\n\t\t\t}\n\t\t\to.render()\n\t\t\tcol_count++\n\t\t\tlast_shape = o.shape\n\t\t})\n\t}\n}\n\nclass GameObject {\n\tconstructor(x, y, element, shape) {\n\t\tthis.x = x\n\t\tthis.y = y\n\t\tthis.el = element\n\t\tthis.el.style.transition = 'all .2s ease-out'\n\t\tthis.el.classList.add('shape')\n\t\tthis.el.classList.add(shape)\n\t\tthis.shape = shape\n\t\tthis.render()\n\t}\n\tdestroy() {\n\t\tif (this.el.parentNode) {\n\t\t\tthis.el.parentNode.removeChild(this.el)\n\t\t}\n\t}\n\trender() {\n\t\tthis.el.style.transform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t\tthis.el.style.webkitTransform = `translate(${this.x}vw, ${(100 - this.y) * -1}vh)`\n\t}\n}\n\nclass Player extends GameObject {\n\tconstructor() {\n\t\tsuper(50, 95, document.createElement('span'), 'player')\n\t\tthis.moving = 0\n\t\tthis.el.style.transition = 'all .05s ease-out'\n\n\t\tthis.init()\n\t\tthis.render()\n\n\t\tthis.background = document.querySelector('.background')\n\t\tthis.background.appendChild(this.el)\n\n\t\tthis.bullets = []\n\t}\n\tinit() {\n\t\tdocument.body.addEventListener(\"touchstart\", this.touchStart.bind(this), false)\n\t\tdocument.body.addEventListener(\"touchend\", this.touchEnd.bind(this), false)\n\t\tdocument.body.addEventListener('keydown', e => {\n\t\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\t\tif (kc == 37) {\n\t\t\t\tthis.moving = -1\n\t\t\t\treturn false\n\t\t\t} else if (kc == 39) {\n\t\t\t\tthis.moving = 1\n\t\t\t\treturn false\n\t\t\t} else if (kc == 32) {\n\t\t\t\tthis.shoot()\n\t\t\t\treturn false\n\t\t\t}\n\t\t})\n\t\tdocument.body.addEventListener('keyup', e => {\n\t\t\tlet kc = e.keyCode ? e.keyCode : e.which\n\t\t\tif (kc == 37) {\n\t\t\t\tthis.moving = 0\n\t\t\t} else if (kc == 39) {\n\t\t\t\tthis.moving = 0\n\t\t\t}\n\t\t})\n\t\tsetInterval(() => {\n\t\t\tthis.move().render()\n\t\t\tthis.bullets.map(b => b.render())\n\t\t}, 16)\n\t}\n\tmove() {\n\t\tif (this.move === 0) {\n\t\t\treturn this\n\t\t}\n\t\tthis.x += this.moving * 0.5\n\t\tif (this.x < 0) {\n\t\t\tthis.x = 0\n\t\t} else if (this.x > 100) {\n\t\t\tthis.x = 100\n\t\t}\n\t\treturn this\n\t}\n\tshoot() {\n\t\tlet bullet = new Bullet(this.x, this.y)\n\t\tthis.background.appendChild(bullet.el)\n\t\tthis.bullets.push(bullet)\n\t}\n\ttouchStart(e) {\n\t\tfor (let i = 0; i < e.targetTouches.length; i++) {\n\t\t\tconst target = e.targetTouches[i]\n\t\t\tif (target.clientY < window.innerHeight * 0.8) {\n\t\t\t\tthis.shoot()\n\t\t\t} else {\n\t\t\t\tif (target.clientX < window.innerWidth * 0.5) {\n\t\t\t\t\tthis.moving = -1\n\t\t\t\t} else {\n\t\t\t\t\tthis.moving = 1\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\te.preventDefault()\n\t\te.stopPropagation()\n\t}\n\ttouchEnd(e) {\n\t\tfor (let i = 0; i < e.changedTouches.length; i++) {\n\t\t\tconst target = e.changedTouches[i]\n\t\t\tif (target.clientY > window.innerHeight * 0.8) {\n\t\t\t\tthis.moving = 0\n\t\t\t}\n\t\t}\n\t}\n}\n\nclass Bullet extends GameObject {\n\tconstructor(x, y) {\n\t\tsuper(x, y, document.createElement('span'), 'bullet')\n\t\tthis.move()\n\t}\n\tmove() {\n\t\tlet timer = setInterval(() => {\n\t\t\tthis.y -= 0.5\n\t\t\tif (this.y < 0 || this.checkCollisions()) {\n\t\t\t\tclearInterval(timer)\n\t\t\t\tthis.destroy()\n\t\t\t}\n\t\t}, 16)\n\t\treturn this\n\t}\n\tcheckCollisions() {\n\t\tconst colliding = game.gameobjects.filter(o => {\n\t\t\treturn o.x > this.x - 1 && o.x < this.x + 1 && o.y > this.y - 0.5 && o.y < this.y + 0.5\n\t\t})\n\t\tcolliding.map(o => o.destroy())\n\t\tgame.gameobjects = game.gameobjects.filter(o => {\n\t\t\treturn !(o.x > this.x - 1 && o.x < this.x + 1 && o.y > this.y - 0.5 && o.y < this.y + 0.5)\n\t\t})\n\t}\n}\n\nwindow.game = new Game\n"]}